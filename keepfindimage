-- example 1:
-- the function required by keepFindingImage must be like "function(locations)", 
-- then you can use the locations inside that function.
local f1 = function(locations)
    for i, v in pairs(locations) do
        log("x:" .. v[1] .. ", y:" .. v[2]);
    end
end

local exit = false;
keepFindingImage("start.png", 1, 0.9, nil, nil, f1, 1000, exit};

-- after some while, in some special status, make exit flag to true to stop the keepFindingImage executing.
exit = true;

-- example 2:
-- ATTENTION: execute f2 will return a new function accepts the locations table which is the function will be execute in keepFindingImage
-- That's different with f1, the merit of f2 is that you can pass some extra parameters to the function(locations). 
local f2 = function(extraDescription)
    return function(locations)
        for i, v in pairs(locations) do
            log(extraDescription .. " x:" .. v[1] .. ", y:" .. v[2]);
        end
    end
end

local exit = false;
local extraDescription = "found color: ";
keepFindingImage("images/spirit.png", 1, 0.9, nil, nil, f2(extraDescription), 1000, exit};

-- after some while, in some special status, make exit flag to true to stop the keepFindingImage executing.
exit = true;
